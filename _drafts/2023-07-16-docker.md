---
title: Docker란?
tags: Docker
aside:
  toc: true
sidebar:
  nav: docs-en
# cover: /assets/images/cover1.jpg
# article_header:
#   type: cover
#   image:
#     src: /assets/images/cover2.jpg
---

Docker에 대해 요약해 보았다.

<!-- more -->

## 도커 기초 개념
#### 1) 가상 머신
- 가상 머신은 물리적 자원인 하드웨어를 효율적으로 활용하기 위해서 하드웨어 공간 위에 가상의 머신을 만든다. 이 분할된 가상 머신들은 각각 독립적인 환경으로 구동되는데, 베이스가 되는 기존의 환경을 <span style="color:red">***Host OS***</span>, 가상 머신으로 분할된 각각의 환경을 <span style="color:red">***Guest OS***</span>라고 부른다.

- 가상 머신을 생성하기 위해서는 하이퍼바이저 또는 가상 머신 모니터라고 불리는 소프트웨어를 이용해야 한다. 하이퍼바이저는 호스트 하드웨어에 설치되어 호스트와 게스트를 나누는 역할을 하고, 각각의 게스트는 하이퍼바이저에 의해 관리되며 시스템 자원을 할당받게 된다. 이 때 하이퍼바이저에 의해 생성된 게스트는 호스트나 다른 게스트와 상호 간섭하지 않고 완전히 분리된 환경에서 구동된다. 하이퍼바이저를 활용하면 마치 하드웨어가 여러 개인 것처럼 하나의 서버를 여러 명이 나눠 쓸 수도 있고, 컴퓨터 한 대에서 서로 다른 OS를 동시에 사용할 수도 있다.

- 하지만 가상 머신으로 무언가 하려면 반드시 하이퍼바이저를 거쳐야 하기 때문에 속도가 저하된다. 또한, 가상 머신은 해당 환경을 구동하는 데 필요한 파일을 모두 포함하고 있기 때문에, 가상 머신을 배포할 때 만들어지는 이미지의 크기가 매우 커지게 된다.

<br>

#### 2) LXC(LinuX Containers)
단일 리눅스 시스템에 동작하고 있는 프로세스를 격리시켜 각 프로세스마다 독자적인 리눅스 시스템 환경을 구축하는 것을 의미한다. 위에서 설명한 가상화는 하이퍼바이저라는 논리적 플랫폼을 이용해 하나의 Host OS 위에 여러 Guest OS를 구동하는 기술이다. 이와 달리 LXC는 하나의 리눅스 시스템에서 프로세스들을 격리시켜 독자적인 시스템 환경을 구축한다. 즉, 리눅스 컨테이너에서 가상화된 프로세스들은 모두 리눅스 시스템을 호환해야 한다.

- 전체 OS를 설치하는 것이 아니기 때문에 특정 애플리케이션 환경만 빠르고 간편하게 구축할 수 있다.  

- 프로세스를 격리하기 때문에 CPU나 메모리는 딱 프로세스가 필요한 만큼만 자원을 사용하고 성능 손실이 거의 없다.  

- 리눅스 컨테이너는 상대적으로 가볍다. 하이퍼바이저를 이용해 가상화를 하지 않기 때문에 오버헤드가 적게 발생한다.

<br>

#### 3) Docker

- 도커 기본 개념을 간단하게 설명하면 다음과 같다.
~~~
도커 파일 = 서버 운영 기록 코드화
도커 이미지 = 도커 파일 + 실행 시점
도커 컨테이너 = 이미지를 실행한 상태로 응용 프로그램의 종속성과 함께 응용 프로그램 자체를 
패키징 Or 캡슐화하여 격리된 공간에서 프로세스를 동작시키는 기술
~~~  
<br>
- 컨테이너는 베이스 환경의 OS를 공유하면서 필요한 프로세스만 격리하는 방식으로, 커널을 공유하기 때문에 호스트 OS의 기능을 모두 사용할 수 있다. 그렇기 때문에 컨테이너 위에서는 호스트 OS와 다른 OS를 구동할 수 없다. 대신 격리시킬 애플리케이션과 거기에 필요한 파일이나 특정 라이브러리 등 종속 항목만 포함하기 때문에 배포를 위해 생성되는 이미지의 용량이 작아진다는 장점이 있다. 운영체제가 아닌 프로세스이며, 하이퍼바이저를 거칠 필요가 없어 실행 속도가 빠르다.  
<br>
- 이미지는 가상 머신이나 컨테이너 또는 프로그램을 실행하는 데 필요한 파일과 라이브러리, 설정 등을 가지고 있는 파일이다. 이미지는 레이어라는 계층 구조로 이루어져 있는데, 변경 사항이 생기면 새로운 레이어를 추가해서 기록한다. 또한, 이미지 전체를 새로 받지 않고 해당 레이어만 받는 것으로 이미지를 업데이트할 수 있다.  
<br>
- 이미지를 실행하면 프로세스, 즉 컨테이너가 된다.

<br>

<span style="color:red">**[그래서 도커란 무엇인가]**</span>
<br>
- 도커는 컨테이너 기반의 가상화 플랫폼이다. 부두에서 컨테이너를 옮기고 관리하는 직업인 docker에서 따 온 이름에 걸맞게 컨테이너를 잘 다룰 수 있게 도와 주는 도구이다. 도커를 이용하면 이미지를 실행시켜 컨테이너로 만들거나, 생성된 컨테이너를 관리하거나, 컨테이너를 다시 이미지로 만드는 작업을 쉽게 할 수 있다.  
<br>
- 개발 과정에서 다른 라이브러리와 충돌하는 것을 방지하기 위해 격리된 환경이 필요할 때, 완성된 서비스를 배포할 때, 혹은 배포 중인 서비스를 받아서 실행해 볼 때 유용하다.   
<br>
- 배포 과정에서 도커를 사용해 필요한 파일들만 포함하여 이미지로 만들면 종속성 이슈를 해결하는 데 도움이 된다.   

<br>
![Image](/assets/postimage/LXCvsDocker.png){:.border}
**(사진 1) LXC와 Docker 구조 비교**

<br>
![Image](/assets/postimage/VMvsDocker.png){:.border}
**(사진 2) 가상 머신과 Docker 구조 비교**

<br>
![Image](/assets/postimage/dockerimagecontainer.png){:.border}
**(사진 3) Docker 이미지와 컨테이너 구조 비교**

<br>

## Docker를 사용하는 이유는?
간단하게 정리하면, 다음과 같다. <br>

1) 수평적 확장이 자유롭다. <br>
2) 서버의 견고함을 보장하면서도 동적으로 바꿀 수 있다. <br> 
3) 다른 사람과 서버 운영 기록을 공유하기 쉽다. <br>

자세하게 설명해 놓은 글은 다음 포스팅을 참조하자. : [왜 도커를 써야 하나요?](https://www.44bits.io/ko/post/why-should-i-use-docker-container#%EB%A7%88%EC%B9%98%EB%A9%B0-%EC%99%9C-%EB%8F%84%EC%BB%A4%EB%A5%BC-%EC%8D%A8%EC%95%BC-%ED%95%98%EB%82%98%EC%9A%94-%EB%B0%98%EB%B3%B5)

<br>

## Dockerfile?
run 도커파일 할 때 프로그램 설치 여부(y/n)를 입력할 수 없으므로 -y 옵션을 주어야 한다.

<br>

## Dockerfile을 이용한 멀티 플랫폼 빌드

<br>

## Docker 명령어
[Docker 명령어 목록](/2023/07/10/docker_command.html)

<br>

## 출처
[왜 도커를 써야 하나요?](https://www.44bits.io/ko/post/why-should-i-use-docker-container#%EB%A7%88%EC%B9%98%EB%A9%B0-%EC%99%9C-%EB%8F%84%EC%BB%A4%EB%A5%BC-%EC%8D%A8%EC%95%BC-%ED%95%98%EB%82%98%EC%9A%94-%EB%B0%98%EB%B3%B5) <br>
[도커란 무엇인가 - 1](https://velog.io/@markany/%EB%8F%84%EC%BB%A4%EC%97%90-%EB%8C%80%ED%95%9C-%EC%96%B4%EB%96%A4-%EA%B2%83-1.-%EB%8F%84%EC%BB%A4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80) <br>
[도커란 무엇인가 - 2](https://squirmm.tistory.com/entry/Docker-%EB%8F%84%EC%BB%A4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80) <br>
[컨테이너란?](https://y-oni.tistory.com/289) <br>
[도커 우분투 설치](https://haengsin.tistory.com/128) <br>
[도커 우분투 재설치](https://biology-statistics-programming.tistory.com/136) <br>
[도커 실행 오류 : Cannot connect to the Docker daemon at... - 1](https://thinkpro.tistory.com/149) <br>
[도커 실행 오류 : Cannot connect to the Docker daemon at... - 2](https://dct-wonjung.tistory.com/entry/Docker-failed-control-process-exited-오류-해결) <br>
[도커 실행 오류 : Run 'systemctl daemon-reload' to reload units](https://pybo.kr/pybo/question/detail/551/) <br>

https://bskyvision.com/entry/docker-도커-이미지-빌드-명령어-docker-build
https://wooono.tistory.com/123
https://sangchul.kr/entry/mac-Docker-Buildx를-사용하여-다중-아키텍처-이미지를-빌드하는-방법
https://kimjingo.tistory.com/115
https://thinkground.studio/2019/04/15/docker-inspect-이미지-or-컨테이너-세부정보-출력/
https://ramen4598.tistory.com/253

https://coding-start.tistory.com/341
https://jangseongwoo.github.io/docker/docker_basic/
https://www.docker.com/blog/how-to-rapidly-build-multi-architecture-images-with-buildx/
https://outerbounds.com/docs/build-custom-image/
https://nicewoong.github.io/development/2018/03/06/docker-commit-container/
https://ramen4598.tistory.com/253
https://shawn-dev.oopy.io/docker-cache-clean
https://sangchul.kr/entry/mac-Docker-Buildx를-사용하여-다중-아키텍처-이미지를-빌드하는-방법
https://judo0179.tistory.com/99
https://blog.taehun.dev/docker-buildx-
https://www.docker.com
https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html
https://han-py.tistory.com/494
https://velog.io/@koo8624/Docker-Buildx로-cross-platform-이미지-빌드하기
https://velog.io/@m0ai/M1-맥에서-x8664-도커-이미지-빌드-설정하기)https://bskyvision.com/entry/docker-도커-이미지-빌드-명령어-docker-build
https://wooono.tistory.com/123
https://sangchul.kr/entry/mac-Docker-Buildx를-사용하여-다중-아키텍처-이미지를-빌드하는-방법
https://kimjingo.tistory.com/115
https://thinkground.studio/2019/04/15/docker-inspect-이미지-or-컨테이너-세부정보-출력/
https://ramen4598.tistory.com/253

https://coding-start.tistory.com/341
https://jangseongwoo.github.io/docker/docker_basic/
https://www.docker.com/blog/how-to-rapidly-build-multi-architecture-images-with-buildx/
https://outerbounds.com/docs/build-custom-image/
https://nicewoong.github.io/development/2018/03/06/docker-commit-container/
https://ramen4598.tistory.com/253
https://shawn-dev.oopy.io/docker-cache-clean
https://sangchul.kr/entry/mac-Docker-Buildx를-사용하여-다중-아키텍처-이미지를-빌드하는-방법
https://judo0179.tistory.com/99
https://blog.taehun.dev/docker-buildx-
https://www.docker.com
https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html
https://han-py.tistory.com/494
https://velog.io/@koo8624/Docker-Buildx로-cross-platform-이미지-빌드하기
https://velog.io/@m0ai/M1-맥에서-x8664-도커-이미지-빌드-설정하기
